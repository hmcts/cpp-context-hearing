<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                                       http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <changeSet id="123" author="hearing" logicalFilePath="123-add-indexes-to-hearing-tables.xml">

        <sql>
            CREATE INDEX IF NOT EXISTS application_draft_result_hearing_id_idx ON application_draft_result (hearing_id);

            ALTER TABLE ha_hearing_applicant_counsel DROP CONSTRAINT IF EXISTS pk_ha_hearing_applicant_counsel;
            ALTER TABLE ha_hearing_applicant_counsel ADD CONSTRAINT pk_ha_hearing_applicant_counsel PRIMARY KEY (id);
            CREATE INDEX IF NOT EXISTS ha_hearing_applicant_counsel_hearing_id_idx ON ha_hearing_applicant_counsel (hearing_id);

            ALTER TABLE ha_hearing_company_representative DROP CONSTRAINT IF EXISTS pk_ha_hearing_company_representative;
            ALTER TABLE ha_hearing_company_representative ADD CONSTRAINT pk_ha_hearing_company_representative PRIMARY KEY (id);
            CREATE INDEX IF NOT EXISTS ha_hearing_company_representative_hearing_id_idx ON ha_hearing_company_representative (hearing_id);

            ALTER TABLE ha_hearing_defence_counsel DROP CONSTRAINT IF EXISTS pk_ha_hearing_defence_counsel;
            ALTER TABLE ha_hearing_defence_counsel ADD CONSTRAINT pk_ha_hearing_defence_counsel PRIMARY KEY (id);
            CREATE INDEX IF NOT EXISTS ha_hearing_defence_counsel_hearing_id_idx ON ha_hearing_defence_counsel (hearing_id);

            ALTER TABLE ha_hearing_interpreter_intermediary DROP CONSTRAINT IF EXISTS pk_ha_hearing_interpreter_intermediary;
            ALTER TABLE ha_hearing_interpreter_intermediary ADD CONSTRAINT pk_ha_hearing_interpreter_intermediary PRIMARY KEY (id);
            CREATE INDEX IF NOT EXISTS ha_hearing_interpreter_intermediary_hearing_id_idx ON ha_hearing_interpreter_intermediary (hearing_id);

            ALTER TABLE ha_hearing_prosecution_counsel DROP CONSTRAINT IF EXISTS pk_ha_hearing_prosecution_counsel;
            ALTER TABLE ha_hearing_prosecution_counsel ADD CONSTRAINT pk_ha_hearing_prosecution_counsel PRIMARY KEY (id);

            ALTER TABLE ha_hearing_respondent_counsel DROP CONSTRAINT IF EXISTS pk_ha_hearing_respondent_counsel;
            ALTER TABLE ha_hearing_respondent_counsel ADD CONSTRAINT pk_ha_hearing_respondent_counsel PRIMARY KEY (id);
            CREATE INDEX IF NOT EXISTS ha_hearing_respondent_counsel_hearing_id_idx ON ha_hearing_respondent_counsel (hearing_id);
        </sql>

    </changeSet>

</databaseChangeLog>