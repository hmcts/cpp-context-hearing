<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet author="CCR" id="1" logicalFilePath="002-added-hearing-details.xml">

        <createTable tableName="hearing_case">
            <column name="id" type="UUID">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="hearingid" type="UUID">
                <constraints nullable="false"/>
            </column>
            <column name="caseid" type="UUID">
                <constraints nullable="false"/>
            </column>
        </createTable>

        <createIndex tableName="hearing_case" indexName="hearing_idx">
            <column name="hearingid"/>
        </createIndex>

        <dropColumn columnName="caseid" tableName="hearing"/>
        <dropColumn columnName="status" tableName="hearing"/>
        <dropColumn columnName="startdate" tableName="hearing"/>
        <dropColumn columnName="duration" tableName="hearing"/>


        <addColumn tableName="hearing">
            <column name="duration" type="INT"/>
        </addColumn>
        <addColumn tableName="hearing">
            <column name="started_at" type="timestamp with time zone"/>
        </addColumn>
        <addColumn tableName="hearing">
            <column name="ended_at" type="timestamp with time zone"/>
        </addColumn>
        <addColumn tableName="hearing">
            <column name="roomname" type="VARCHAR(255)"/>
        </addColumn>
        <addColumn tableName="hearing">
            <column name="is_result_shared" type="BOOLEAN"/>
        </addColumn>
        <addColumn tableName="hearing">
            <column name="startdate" type="date"/>
        </addColumn>
        <addColumn tableName="hearing">
            <column name="starttime" type="time"/>
        </addColumn>
        <createIndex tableName="hearing" indexName="hearing_startdate_idx">
            <column name="startdate"/>
        </createIndex>

    </changeSet>


</databaseChangeLog>
